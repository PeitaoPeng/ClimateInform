#!/bin/sh

set -eaux

lcdir=/export/hobbes/wd52pp/project/prd_skill
tmp=/export/hobbes/wd52pp/tmp
datadir=/export-12/cacsrv1/wd52pp/prd_skill
#
nseasons=15   #15x3: winter=ndj djf jfm; summer=mjj jja jas
model=nino34_noflt
season=winter
#
/bin/rm $tmp/fort.*         
cp $lcdir/hss_t_s.f $tmp/.
cd $tmp
#
cat > parm.h << eof
       parameter(nss=$nseasons)
       parameter(ncd=102)
eof
#
#
f77 -o hss_t_s.x hss_t_s.f
echo "done compiling"

#
 ln -s $datadir/${model}prd_sfcT_102CD.95-09.$season.i3e    fort.10
 ln -s $datadir/wmoobs_sfcT_102CD.95-09.$season.i3e         fort.20
 ln -s $datadir/hss_$model.temp.uscd.95-09.ts.$season.gr    fort.30
 ln -s $datadir/hss_$model.temp.uscd.95-09.cd.$season.gr    fort.40
#
hss_t_s.x > $datadir/hss.${model}.temp.95-09.$season.out
#

cat>$datadir/hss_$model.temp.uscd.95-09.ts.$season.ctl<<EOF
dset ^hss_$model.temp.uscd.95-09.ts.$season.gr
undef 999.0
title Realtime Surface Obs
xdef    1 linear    0.000  1
ydef    1 linear    0.000  1
zdef    1 levels 500
tdef 999 linear jan1991  1yr
vars   1
hss    0 99 Type of Ob
endvars
EOF
#

