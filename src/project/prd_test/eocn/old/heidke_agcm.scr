#!/bin/sh

set -eaux

lcdir=/export-6/sgi9/wd52pp/project/prd_skill
tmp=/export-6/sgi9/wd52pp/tmp
datadir1=/export-6/cacsrv1/wd52pp/LF_prd
datadir2=/disk50/data/wd52pp/amip_skill
#
nyr=51 #1950-2000
model=5model_esm
#
/bin/rm $tmp/fort.*         
cp $lcdir/heidke_agcm.f $tmp/.
cd $tmp
unlimit
#
cat > parm.h << eof
       parameter(nyr=$nyr)
       parameter(ncd=102)
eof
#
#
f77 -o heidke_agcm.x heidke_agcm.f
echo "done compiling"

#
 ln -s $datadir1/temp_102.txt    fort.10
 ln -s $datadir2/$model.sfct.esm.uscd.50-00.txt   fort.20
 ln -s $datadir2/heidke_$model.sfct.esm.uscd.50-00.gr    fort.30
#
heidke_agcm.x > $lcdir/out
#

cat>$datadir2/heidke_$model.sfct.esm.uscd.50-00.ctl<<EOF
dset $datadir2/heidke_$model.sfct.esm.uscd.50-00.gr
undef 999.0
title Realtime Surface Obs
xdef    1 linear    0.000  1
ydef    1 linear    0.000  5
zdef    1 levels 500
tdef 999 linear jan1950  1mon
vars   2
ss1   0 99 Type of Ob
ss2   0 99 Type of Ob
endvars
EOF
