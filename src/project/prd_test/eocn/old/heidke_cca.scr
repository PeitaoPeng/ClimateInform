#!/bin/sh

set -eaux

lcdir=/export-6/sgi9/wd52pp/project/prd_skill
tmp=/export-6/sgi9/wd52pp/tmp
datadir1=/export-6/cacsrv1/wd52pp/LF_prd
datadir2=/disk50/data/wd52pp/amip_skill
#
nyr=48 #1956-2003
model=cca
#
/bin/rm $tmp/fort.*         
cp $lcdir/heidke_cca.f $tmp/.
cd $tmp
unlimit
#
cat > parm.h << eof
       parameter(nyr=$nyr)
       parameter(ncd=102)
eof
#
#
f77 -o heidke_cca.x heidke_cca.f
echo "done compiling"

#
 ln -s $datadir1/temp_102.txt    fort.10
 ln -s $datadir2/CCA-T.dat   fort.20
 ln -s $datadir2/heidke_$model.sfct.uscd.56-03.gr    fort.30
#
heidke_cca.x > $lcdir/out
#

cat>$datadir2/heidke_$model.sfct.uscd.56-03.ctl<<EOF
dset $datadir2/heidke_$model.sfct.uscd.56-03.gr
undef 999.0
title Realtime Surface Obs
xdef    1 linear    0.000  1
ydef    1 linear    0.000  5
zdef    1 levels 500
tdef 999 linear jan1956  1mon
vars   2
ss1   0 99 Type of Ob
ss2   0 99 Type of Ob
endvars
EOF
