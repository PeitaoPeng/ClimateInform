#!/bin/sh

set -eaux

lcdir=/export/hobbes/wd52pp/project/prd_skill
tmp=/export/hobbes/wd52pp/tmp
datadir=/export-12/cacsrv1/wd52pp/prd_skill
#
nseasons=180   #JFM1995-
#model=gocnv1
#model=gocn
#model=eocn
#model=nino34
#model=ensocmp_6ctg
model=enso_comp
#
/bin/rm $tmp/fort.*         
cp $lcdir/acc_rms_t_s.f $tmp/.
cd $tmp
#
cat > parm.h << eof
       parameter(nss=$nseasons)
       parameter(ncd=102)
eof
#
#
f77 -o acc_rms_t_s.x acc_rms_t_s.f
echo "done compiling"

#
 ln -s $datadir/${model}prd_sfcT_102CD.jfm1995-djf2009.non-norm.i3e   fort.10
 ln -s $datadir/wmoobs_sfcT_102CD.jfm1995-djf2009.i3e        fort.20
 ln -s $datadir/acc_rms_$model.temp.uscd.jfm95-djf09.ts.gr    fort.30
 ln -s $datadir/acc_rms_$model.temp.uscd.jfm95-djf09.cd.gr    fort.40
#
acc_rms_t_s.x > $datadir/acc_rms.${model}.temp.jfm1995-djf2009.out
#

cat>$datadir/acc_rms_$model.temp.uscd.jfm95-djf09.ts.ctl<<EOF
dset ^acc_rms_$model.temp.uscd.jfm95-djf09.ts.gr
undef 999.0
title Realtime Surface Obs
xdef    1 linear    0.000  1
ydef    1 linear    0.000  1
zdef    1 levels 500
tdef 999 linear jan1995  1mon
vars   2
acc    0 99 Type of Ob
rms    0 99 Type of Ob
endvars
EOF
#
cat>$datadir/acc_rms_$model.temp.uscd.jfm95-djf09.2x2.ctl<<EOF2
dset ^acc_rms_$model.temp.uscd.jfm95-djf09.2x2.gr
undef -9999.0
title Realtime Surface Obs
xdef   36 linear -130 2
ydef   19 LINEAR   20 2
zdef    1 levels 500
tdef 999 linear jan1995  1mon
vars   2
acc      0 99 ocn prd t
rms      0 99 ocn prd t
endvars
EOF2

