#!/bin/sh

set -eaux

#
 lcdir=/cpc/home/wd52pp/project/prd_skill
 datadir1=/cpc/home/wd52pp/data/prd_skill
 datadir2=/cpc/home/wd52pp/data/obs/sst
 tmp=/cpc/home/wd52pp/tmp
#
 cp corr_reof_vs_sst.f $tmp/.
 cd $tmp
 \rm fort.*
#
cat > parm.h << eof
       parameter(imx=180,jmx=89,mode=10)
       parameter(ltime=81)
eof
#
   ln -s $datadir1/rpc.temp_102_anom_1931-2011.jfm.i3e fort.11
#  ln -s $datadir2/sst.jfm1931-jfm2011.gr          fort.12
   ln -s $datadir2/sst.dec.1930-dec2011.gr         fort.12
 
#  ln -s $datadir1/corr.ust_rpc.vs.sst.1931-2011jfm.gr  fort.50
   ln -s $datadir1/corr.jfm_ust_rpc.vs.dec_sst.1931-2011jfm.gr  fort.50
#
#
 gfortran  corr_reof_vs_sst.f
 a.out > $lcdir/out
#
cat>$datadir1/corr.jfm_ust_rpc.vs.dec_sst.1931-2011jfm.ctl<<EOF
dset ^corr.jfm_ust_rpc.vs.dec_sst.1931-2011jfm.gr
undef -999.0
title Realtime Surface Obs
xdef  180 LINEAR  0.  2.0
ydef   89 LINEAR  -88. 2.0
zdef   01 LEVELS 1
tdef 999 linear jan1931  1yr
vars   2
cor   0 99 corr
reg   0 99 regr
endvars
EOF 
