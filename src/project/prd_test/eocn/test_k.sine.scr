#!/bin/sh

set -eaux

lcdir=/export/hobbes/wd52pp/project/prd_skill
tmp=/export/hobbes/wd52pp/tmp
datadir=/export-12/cacsrv1/wd52pp/prd_skill
#
longtime=5000
kp=50        # max ocn avg length
ktp=100      # period of sin wave
nts=14       #  of ts to be seen
#
cp $lcdir/test_k.sine.f $tmp/test_k.f
cd $tmp
#
cat > parm.h << eof
       parameter(ltime=$longtime)
       parameter(kp=$kp)
       parameter(ktp=$ktp)
       parameter(nts=$nts)
eof
#
f77 -o test.x test_k.f
/bin/rm $tmp/fort.*         
echo "done compiling"

#
 ln -s $datadir/test_ts.gr   fort.10
#
 ln -s $datadir/ac_k.ocn.gr      fort.20
 ln -s $datadir/rms_k.ocn.gr     fort.21
 ln -s $datadir/fcst_ts.ocn.gr   fort.22
#
 ln -s $datadir/ac_k.slp.gr      fort.30
 ln -s $datadir/rms_k.slp.gr     fort.31
 ln -s $datadir/fcst_ts.slp.gr   fort.32

#
test.x > $lcdir/out.k_test
#

cat>$datadir/test_ts.ctl<<EOF
dset $datadir/test_ts.gr
undef 999.0
title Realtime Surface Obs
xdef    1 linear    0.000  1
ydef    1 linear    0.000  1
zdef    1 levels 500
tdef $longtime linear jan1900  1yr
vars   $nts
t1   0 99 Type of Ob
t2   0 99 Type of Ob
t3   0 99 Type of Ob
t4   0 99 Type of Ob
t5   0 99 Type of Ob
t6   0 99 Type of Ob
t7   0 99 Type of Ob
t8   0 99 Type of Ob
t9   0 99 Type of Ob
t10  0 99 Type of Ob
t11  0 99 Type of Ob
t12  0 99 Type of Ob
t13  0 99 Type of Ob
t14  0 99 Type of Ob
endvars
EOF
#
cat>$datadir/ac_k.ocn.ctl<<EOF2
dset $datadir/ac_k.ocn.gr
undef 999.0
title Realtime Surface Obs
xdef    1 linear    0.000  1
ydef    1 linear    0.000  1
zdef    1 levels 500
tdef $longtime linear jan1900  1yr
vars   $nts
t1   0 99 Type of Ob
t2   0 99 Type of Ob
t3   0 99 Type of Ob
t4   0 99 Type of Ob
t5   0 99 Type of Ob
t6   0 99 Type of Ob
t7   0 99 Type of Ob
t8   0 99 Type of Ob
t9   0 99 Type of Ob
t10  0 99 Type of Ob
t11  0 99 Type of Ob
t12  0 99 Type of Ob
t13  0 99 Type of Ob
t14  0 99 Type of Ob
endvars
EOF2
#
cat>$datadir/rms_k.ocn.ctl<<EOF2
dset $datadir/rms_k.ocn.gr
undef 999.0
title Realtime Surface Obs
xdef    1 linear    0.000  1
ydef    1 linear    0.000  1
zdef    1 levels 500
tdef $longtime linear jan1900  1yr
vars   $nts
t1   0 99 Type of Ob
t2   0 99 Type of Ob
t3   0 99 Type of Ob
t4   0 99 Type of Ob
t5   0 99 Type of Ob
t6   0 99 Type of Ob
t7   0 99 Type of Ob
t8   0 99 Type of Ob
t9   0 99 Type of Ob
t10  0 99 Type of Ob
t11  0 99 Type of Ob
t12  0 99 Type of Ob
t13  0 99 Type of Ob
t14  0 99 Type of Ob
endvars
EOF2
#
cat>$datadir/ac_k.slp.ctl<<EOF3
dset $datadir/ac_k.slp.gr
undef 999.0
title Realtime Surface Obs
xdef    1 linear    0.000  1
ydef    1 linear    0.000  1
zdef    1 levels 500
tdef $longtime linear jan1900  1yr
vars   $nts
t1   0 99 Type of Ob
t2   0 99 Type of Ob
t3   0 99 Type of Ob
t4   0 99 Type of Ob
t5   0 99 Type of Ob
t6   0 99 Type of Ob
t7   0 99 Type of Ob
t8   0 99 Type of Ob
t9   0 99 Type of Ob
t10  0 99 Type of Ob
t11  0 99 Type of Ob
t12  0 99 Type of Ob
t13  0 99 Type of Ob
t14  0 99 Type of Ob
endvars
EOF3
#
cat>$datadir/rms_k.slp.ctl<<EOF4
dset $datadir/rms_k.slp.gr
undef 999.0
title Realtime Surface Obs
xdef    1 linear    0.000  1
ydef    1 linear    0.000  1
zdef    1 levels 500
tdef $longtime linear jan1900  1yr
vars   $nts
t1   0 99 Type of Ob
t2   0 99 Type of Ob
t3   0 99 Type of Ob
t4   0 99 Type of Ob
t5   0 99 Type of Ob
t6   0 99 Type of Ob
t7   0 99 Type of Ob
t8   0 99 Type of Ob
t9   0 99 Type of Ob
t10  0 99 Type of Ob
t11  0 99 Type of Ob
t12  0 99 Type of Ob
t13  0 99 Type of Ob
t14  0 99 Type of Ob
endvars
EOF4
#
cat>$datadir/fcst_ts.ocn.ctl<<EOF5
dset $datadir/fcst_ts.ocn.gr
undef 999.0
title Realtime Surface Obs
xdef    1 linear    0.000  1
ydef    1 linear    0.000  1
zdef    1 levels 500
tdef $longtime linear jan1900  1yr
vars   $nts
t1   0 99 Type of Ob
t2   0 99 Type of Ob
t3   0 99 Type of Ob
t4   0 99 Type of Ob
t5   0 99 Type of Ob
t6   0 99 Type of Ob
t7   0 99 Type of Ob
t8   0 99 Type of Ob
t9   0 99 Type of Ob
t10  0 99 Type of Ob
t11  0 99 Type of Ob
t12  0 99 Type of Ob
t13  0 99 Type of Ob
t14  0 99 Type of Ob
endvars
EOF5
#
cat>$datadir/fcst_ts.slp.ctl<<EOF6
dset $datadir/fcst_ts.slp.gr
undef 999.0
title Realtime Surface Obs
xdef    1 linear    0.000  1
ydef    1 linear    0.000  1
zdef    1 levels 500
tdef $longtime linear jan1900  1yr
vars   $nts
t1   0 99 Type of Ob
t2   0 99 Type of Ob
t3   0 99 Type of Ob
t4   0 99 Type of Ob
t5   0 99 Type of Ob
t6   0 99 Type of Ob
t7   0 99 Type of Ob
t8   0 99 Type of Ob
t9   0 99 Type of Ob
t10  0 99 Type of Ob
t11  0 99 Type of Ob
t12  0 99 Type of Ob
t13  0 99 Type of Ob
t14  0 99 Type of Ob
endvars
EOF6
#
