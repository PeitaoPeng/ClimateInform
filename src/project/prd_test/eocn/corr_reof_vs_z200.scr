#!/bin/sh

set -eaux

#
 lcdir=/cpc/home/wd52pp/project/prd_skill
 datadir1=/cpc/home/wd52pp/data/prd_skill
 datadir2=/cpc/home/wd52pp/data/obs/reanl
 tmp=/cpc/home/wd52pp/tmp
#
 cp corr_reof_vs_z200.f $tmp/.
 cd $tmp
 \rm fort.*
#
cat > parm.h << eof
       parameter(imx=144,jmx=73,mode=10)
       parameter(ltime=81)
       parameter(ltime2=63)
eof
#
   ln -s $datadir1/rpc.temp_102_anom_1931-2011.jfm.i3e fort.11
   ln -s $datadir2/z200_49-11jfm.gr                    fort.12
 
   ln -s $datadir1/corr.ust_rpc.vs.z200.49-11jfm.gr  fort.50
#
#
gfortran  corr_reof_vs_z200.f
 a.out > $lcdir/out
#
cat>$datadir1/corr.ust_rpc.vs.z200.1949-2011jfm.ctl<<EOF
dset ^corr.ust_rpc.vs.z200.49-11jfm.gr
undef -999.0
title Realtime Surface Obs
xdef  144 linear    0.000  2.5
ydef   73 linear    -90.0  2.5
zdef   01 LEVELS 1
tdef 999 linear jan1931  1yr
vars   2
cor   0 99 corr
reg   0 99 regr
endvars
EOF 
