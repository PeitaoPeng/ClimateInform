#!/bin/sh

set -eaux

lcdir=/export-6/sgi9/wd52pp/utility/filter
tmp=/export-6/sgi9/wd52pp/tmp
datadir=/export-6/cacsrv1/wd52pp/LF_prd
#
longtime=71
imax=1
jmax=1
ph=10              #for HP or LP: ph=10,pm=11,pl=12
pm=11
pl=12
#ph=6                #for HP or LP: ph=6,pm=7,pl=8
#pm=7
#pl=8
fhl=0.9
dt=1
#
cp $lcdir/Wang_flt_test.s.f $tmp/.
cp $lcdir/Wang_flt_test.f   $tmp/Wang_flt_test.f
cp /export-6/sgi9/wd52pp/utility/auto_regr/AR_prediction.s.f $tmp/.
cd $tmp
unlimit
#
cat > parm.h << eof
       parameter(ltime=$longtime)
       parameter(ph=$ph,pl=$pl,pm=$pm,fhl=$fhl,dt=$dt)
eof
#
#
cat > parm.s.h << eof
       parameter(ltime=3*$longtime)
eof
#
f77 -r8 -o Wang_flt.x Wang_flt_test.f AR_prediction.s.f Wang_flt_test.s.f
echo "done compiling"
#
/bin/rm  $tmp/fort.*
 ln -s $datadir/coef.temp_102_anom_1931-2001.djf.i3e fort.10
 ln -s $datadir/LP_HP_coef.temp_102_anom_1931-2001.djf.i3e fort.50
#
Wang_flt.x
#
ja -s
